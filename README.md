Итак стоит задача например на двух хостах (двух слейвах) собрать мавеном джава приложение (слейв-1) и развернуть его (слейв-2)
На первом необходимо установить мавен и гит. На втором томкат и задеплоить туда получившийся артефакт.
1. В домашнем каталоге мастера создать папку roles и перейти туда
mkdir roles
cd roles
2. Создать роль для сборочного хоста
ansible-galaxy init build
3. Перейти в директорию build/default и в ней добавить в main.yml следующее содержание:
<ссылка на build/defaults/main.yml>
4. Перейти в директорию build/tasks и в ней добавить в main.yml следующее содержание:
<ссылка на build/tasks/main.yml>
3. Создать роль для хоста на котором будем деплоить Java артефакт
ansible-galaxy init deploy
4. Перейти в директорию deploy/default и в ней добавить в main.yml следующее содержание:
<ссылка на deploy/defaults/main.yml>
5. Перейти в директорию deploy/handlers и в ней добавить в main.yml следующее содержание:
<ссылка на deploy/handlers/main.yml>
6. Перейти в директорию deploy/tasks и в ней добавить в main.yml следующее содержание:
<ссылка на deploy/tasks/main.yml>
7. Создать результирующий плейбук на уровне директории с ролями со следующим содержанием:
<ссылка на /roles/roles.yml>